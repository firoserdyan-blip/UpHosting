<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Menonton di UpHosting</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* General Body & Typography */
        body { 
            font-family: 'Poppins', sans-serif; 
            text-align: center; 
            padding: 20px; 
            background-color: #f8f9fa; /* Light grey background */
            color: #343a40; /* Darker text */
            line-height: 1.6;
        }
        .container { 
            max-width: 800px; 
            margin: 40px auto; 
            background-color: white; 
            padding: 30px; 
            border-radius: 12px; 
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08); /* Softer, deeper shadow */
        }
        h1 { 
            color: #2c3e50; 
            font-weight: 700;
            margin-bottom: 30px;
        }
        .media-container { 
            margin-top: 20px; 
            border-radius: 8px; /* Rounded corners for media container */
            overflow: hidden; /* Ensures media respects border-radius */
        }
        #mediaDisplay { 
            width: 100%; 
            height: auto; 
            min-height: 400px; 
            background-color: #000; /* Black background for player area */
            display: flex; 
            align-items: center; 
            justify-content: center; 
            color: white; 
            font-size: 18px;
        }
        #mediaDisplay iframe, #mediaDisplay video, #mediaDisplay img {
            border-radius: 8px; /* Round corners for the media itself */
        }
        #status {
            color: #007bff; /* Blue for status messages */
            font-weight: 600;
            margin-bottom: 20px;
        }

        /* Description Section */
        .description-section { 
            margin-top: 40px; 
            padding: 25px; 
            border-top: 2px solid #e9ecef; /* Separator line */
            text-align: left; 
            color: #495057; /* Slightly darker text */
            font-size: 15px;
        }
        .description-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Menonton di UpHosting</h1>
        
        <div class="media-container">
            <p id="status">Memuat konten...</p>
            
            <div id="mediaDisplay">
                </div>
        </div>
        
        <div class="description-section">
            <h3>Tentang UpHosting</h3>
            <p>UpHosting adalah solusi hosting media online Anda yang cepat dan mudah. Kami memungkinkan Anda berbagi video dan foto dengan link yang rapi dan profesional. Cukup unggah konten Anda ke platform terkemuka seperti Vimeo atau YouTube, dapatkan URL publiknya, dan UpHosting akan menyajikan link pendek yang bisa Anda sebarkan ke siapa saja.</p>
            <p>Fokus kami adalah pada kesederhanaan dan aksesibilitas, memastikan media Anda dapat diakses dengan mudah dan cepat oleh audiens Anda di seluruh dunia. Mulai berbagi momen berharga Anda sekarang juga!</p>
        </div>
    </div>

    <script>
        // 1. Dapatkan ID terenkripsi dari URL
        const urlParams = new URLSearchParams(window.location.search);
        const encodedUrl = urlParams.get('id');
        const statusElement = document.getElementById('status');
        const mediaDisplay = document.getElementById('mediaDisplay');

        if (encodedUrl) {
            try {
                // 2. Dekode ID kembali ke URL Asli
                const mediaUrl = atob(encodedUrl.replace(/_/g, '/').replace(/-/g, '+'));
                statusElement.textContent = `Memuat media Anda...`;

                // 3. Tentukan Tipe Konten
                const isVimeo = mediaUrl.includes('vimeo.com/video/');
                const isYouTube = mediaUrl.includes('youtube.com') || mediaUrl.includes('youtu.be');
                const isImage = mediaUrl.endsWith('.jpg') || mediaUrl.endsWith('.jpeg') || mediaUrl.endsWith('.png') || mediaUrl.endsWith('.gif') || mediaUrl.endsWith('.webp');
                const isDirectVideo = mediaUrl.endsWith('.mp4') || mediaUrl.endsWith('.mov') || mediaUrl.endsWith('.webm');
                
                if (isVimeo || isYouTube) {
                    let embedUrl = mediaUrl;
                    
                    if (isYouTube) {
                        if (mediaUrl.includes('youtube.com/watch?v=')) {
                            const videoId = mediaUrl.split('v=')[1].split('&')[0];
                            embedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
                        } else if (mediaUrl.includes('youtu.be/')) {
                             const videoId = mediaUrl.split('youtu.be/')[1].split('?')[0];
                             embedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
                        }
                    } else if (isVimeo) {
                         embedUrl = mediaUrl.includes('?') ? mediaUrl + '&autoplay=1' : mediaUrl + '?autoplay=1';
                    }

                    mediaDisplay.innerHTML = `
                        <iframe width="100%" height="400" 
                            src="${embedUrl}" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                        </iframe>
                    `;
                } else if (isImage) {
                    statusElement.textContent = 'Menampilkan Foto...';
                    mediaDisplay.innerHTML = `<img src="${mediaUrl}" style="max-width: 100%; height: auto; max-height: 600px; display: block; margin: auto; border-radius: 8px;">`;
                } else if (isDirectVideo) {
                    statusElement.textContent = 'Menampilkan Video...';
                     mediaDisplay.innerHTML = `<video controls autoplay style="max-width: 100%; height: auto; min-height: 400px; background: black; border-radius: 8px;"><source src="${mediaUrl}"></video>`;
                } 
                else {
                    statusElement.textContent = 'Gagal: Tipe media tidak didukung atau link tidak valid.';
                    mediaDisplay.innerHTML = '<p style="color: red;">Link tontonan tidak valid.</p>';
                }

            } catch (e) {
                statusElement.textContent = 'Gagal: Link tidak valid atau tidak dapat didekode.';
                mediaDisplay.innerHTML = '<p style="color: red;">Link tontonan tidak valid.</p>';
            }
        } else {
            statusElement.textContent = 'Gagal: Tidak ada ID media ditemukan.';
        }
    </script>
</body>
</html>
